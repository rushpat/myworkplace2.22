{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rushipat/Documents/Data/Programs/videochatapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rushipat/Documents/Data/Programs/videochatapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export var doLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,database,handleUpdate){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"In doLogin\");_context.next=3;return database.ref(\"/notifs/\"+username).remove();case 3:database.ref(\"/notifs/\"+username).on(\"value\",function(snapshot){snapshot.exists()&&handleUpdate(snapshot.val(),username);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function doLogin(_x,_x2,_x3){return _ref.apply(this,arguments);};}();export var removeNotifs=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(database,username,connectedUser){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"In removenotifs\");_context2.next=3;return database.ref(\"/notifs/\"+username).remove();case 3:_context2.next=5;return database.ref(\"/notifs/\"+connectedUser).remove();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function removeNotifs(_x4,_x5,_x6){return _ref2.apply(this,arguments);};}();export var doOffer=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(to,offer,database,username){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"In doOffer\");_context3.next=3;return database.ref(\"/notifs/\"+to).set({type:\"offer\",from:username,offer:JSON.stringify(offer)});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function doOffer(_x7,_x8,_x9,_x10){return _ref3.apply(this,arguments);};}();export var doAnswer=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(to,answer,database,username){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"In doAnswer\");_context4.next=3;return database.ref(\"/notifs/\"+to).update({type:\"answer\",from:username,answer:JSON.stringify(answer)});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function doAnswer(_x11,_x12,_x13,_x14){return _ref4.apply(this,arguments);};}();export var doLeaveNotif=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(to,database,username){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"In doLeaveNotif\");_context5.next=3;return database.ref(\"/notifs/\"+to).update({type:\"leave\",from:username});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function doLeaveNotif(_x15,_x16,_x17){return _ref5.apply(this,arguments);};}();export var doCandidate=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(to,candidate,database,username){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(\"In docandidate\");// send the new candiate to the peer\n_context6.next=3;return database.ref(\"/notifs/\"+to).update({type:\"candidate\",from:username,candidate:JSON.stringify(candidate)});case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function doCandidate(_x18,_x19,_x20,_x21){return _ref6.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/rushipat/Documents/Data/Programs/videochatapp/src/modules/FirebaseModule.js"],"names":["doLogin","username","database","handleUpdate","console","log","ref","remove","on","snapshot","exists","val","removeNotifs","connectedUser","doOffer","to","offer","set","type","from","JSON","stringify","doAnswer","answer","update","doLeaveNotif","doCandidate","candidate"],"mappings":"2QAAA,MAAO,IAAMA,CAAAA,OAAO,0FAAG,iBAAOC,QAAP,CAAiBC,QAAjB,CAA2BC,YAA3B,kHACrBC,OAAO,CAACC,GAAR,CAAY,YAAZ,EADqB,sBAEfH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaL,QAA1B,EAAoCM,MAApC,EAFe,QAGrBL,QAAQ,CAACI,GAAT,CAAa,WAAaL,QAA1B,EAAoCO,EAApC,CAAuC,OAAvC,CAAgD,SAACC,QAAD,CAAc,CAC5DA,QAAQ,CAACC,MAAT,IAAqBP,YAAY,CAACM,QAAQ,CAACE,GAAT,EAAD,CAAiBV,QAAjB,CAAjC,CACD,CAFD,EAHqB,sDAAH,kBAAPD,CAAAA,OAAO,oDAAb,CAQP,MAAO,IAAMY,CAAAA,YAAY,2FAAG,kBAAOV,QAAP,CAAiBD,QAAjB,CAA2BY,aAA3B,sHAC1BT,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAD0B,uBAEpBH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaL,QAA1B,EAAoCM,MAApC,EAFoB,+BAGpBL,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaO,aAA1B,EAAyCN,MAAzC,EAHoB,yDAAH,kBAAZK,CAAAA,YAAY,sDAAlB,CAMP,MAAO,IAAME,CAAAA,OAAO,2FAAG,kBAAOC,EAAP,CAAWC,KAAX,CAAkBd,QAAlB,CAA4BD,QAA5B,sHACrBG,OAAO,CAACC,GAAR,CAAY,YAAZ,EADqB,uBAEfH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaS,EAA1B,EAA8BE,GAA9B,CAAkC,CACtCC,IAAI,CAAE,OADgC,CAEtCC,IAAI,CAAElB,QAFgC,CAGtCe,KAAK,CAAEI,IAAI,CAACC,SAAL,CAAeL,KAAf,CAH+B,CAAlC,CAFe,yDAAH,kBAAPF,CAAAA,OAAO,2DAAb,CASP,MAAO,IAAMQ,CAAAA,QAAQ,2FAAG,kBAAOP,EAAP,CAAWQ,MAAX,CAAmBrB,QAAnB,CAA6BD,QAA7B,sHACtBG,OAAO,CAACC,GAAR,CAAY,aAAZ,EADsB,uBAEhBH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaS,EAA1B,EAA8BS,MAA9B,CAAqC,CACzCN,IAAI,CAAE,QADmC,CAEzCC,IAAI,CAAElB,QAFmC,CAGzCsB,MAAM,CAAEH,IAAI,CAACC,SAAL,CAAeE,MAAf,CAHiC,CAArC,CAFgB,yDAAH,kBAARD,CAAAA,QAAQ,8DAAd,CASP,MAAO,IAAMG,CAAAA,YAAY,2FAAG,kBAAOV,EAAP,CAAWb,QAAX,CAAqBD,QAArB,sHAC1BG,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAD0B,uBAEpBH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaS,EAA1B,EAA8BS,MAA9B,CAAqC,CACzCN,IAAI,CAAE,OADmC,CAEzCC,IAAI,CAAElB,QAFmC,CAArC,CAFoB,yDAAH,kBAAZwB,CAAAA,YAAY,yDAAlB,CAQP,MAAO,IAAMC,CAAAA,WAAW,2FAAG,kBAAOX,EAAP,CAAWY,SAAX,CAAsBzB,QAAtB,CAAgCD,QAAhC,sHACzBG,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA;AAFyB,uBAGnBH,CAAAA,QAAQ,CAACI,GAAT,CAAa,WAAaS,EAA1B,EAA8BS,MAA9B,CAAqC,CACzCN,IAAI,CAAE,WADmC,CAEzCC,IAAI,CAAElB,QAFmC,CAGzC0B,SAAS,CAAEP,IAAI,CAACC,SAAL,CAAeM,SAAf,CAH8B,CAArC,CAHmB,yDAAH,kBAAXD,CAAAA,WAAW,8DAAjB","sourcesContent":["export const doLogin = async (username, database, handleUpdate) => {\n  console.log(\"In doLogin\");\n  await database.ref(\"/notifs/\" + username).remove();\n  database.ref(\"/notifs/\" + username).on(\"value\", (snapshot) => {\n    snapshot.exists() && handleUpdate(snapshot.val(), username);\n  });\n};\n\nexport const removeNotifs = async (database, username, connectedUser) => {\n  console.log(\"In removenotifs\");\n  await database.ref(\"/notifs/\" + username).remove();\n  await database.ref(\"/notifs/\" + connectedUser).remove();\n};\n\nexport const doOffer = async (to, offer, database, username) => {\n  console.log(\"In doOffer\");\n  await database.ref(\"/notifs/\" + to).set({\n    type: \"offer\",\n    from: username,\n    offer: JSON.stringify(offer),\n  });\n};\n\nexport const doAnswer = async (to, answer, database, username) => {\n  console.log(\"In doAnswer\");\n  await database.ref(\"/notifs/\" + to).update({\n    type: \"answer\",\n    from: username,\n    answer: JSON.stringify(answer),\n  });\n};\n\nexport const doLeaveNotif = async (to, database, username) => {\n  console.log(\"In doLeaveNotif\");\n  await database.ref(\"/notifs/\" + to).update({\n    type: \"leave\",\n    from: username,\n  });\n};\n\nexport const doCandidate = async (to, candidate, database, username) => {\n  console.log(\"In docandidate\");\n  // send the new candiate to the peer\n  await database.ref(\"/notifs/\" + to).update({\n    type: \"candidate\",\n    from: username,\n    candidate: JSON.stringify(candidate),\n  });\n};\n"]},"metadata":{},"sourceType":"module"}